<!DOCTYPE html>
<html>
<head><title>GPS Tracker</title></head>
<body>
  <h2 id="status">Requesting location permission...</h2>

  <script>
    const webhookURL = "https://script.google.com/macros/s/AKfycbyWzAfLgQDQPzlPnoJxhwvKVnYAgeUVpCIx-dy4qPa2mqU-yHCC2MlZY-N2Trdr8w2XBA/exec";

    if ("geolocation" in navigator) {
      navigator.geolocation.getCurrentPosition(
        function(position) {
          document.getElementById('status').textContent = 'Location permission granted.';
          fetch(webhookURL, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({
              lat: position.coords.latitude,
              lon: position.coords.longitude,
              device: navigator.userAgent
            })
          })
          .then(() => document.getElementById('status').textContent = 'Location sent successfully.')
          .catch(() => document.getElementById('status').textContent = 'Error sending location.');
        },
        function(error) {
          document.getElementById('status').textContent = 'Location permission denied or error.';
        }
      );
    } else {
      document.getElementById('status').textContent = 'Geolocation is not supported.';
    }
  </script>
</body>
</html>
